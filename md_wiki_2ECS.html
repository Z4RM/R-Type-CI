<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.13.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>R-Type: Entity-Component-System Architecture</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">R-Type
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.13.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('md_wiki_2ECS.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Entity-Component-System Architecture</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md48"></a></p>
<p>This document provides a detailed overview of the <b>Entity-Component-System (ECS)</b> architecture. It describes the key components, their implementation, and how they interact within the system.</p>
<hr  />
<h1><a class="anchor" id="autotoc_md50"></a>
Overview</h1>
<p>An ECS is a software architecture pattern used in game development and other high-performance applications. It decouples data from behavior, making it flexible and efficient for handling complex object hierarchies.</p>
<hr  />
<h2><a class="anchor" id="autotoc_md52"></a>
Key Concepts</h2>
<ol type="1">
<li><b>Entity</b><ul>
<li>A unique identifier representing a game object (e.g., player, enemy, or tree).</li>
<li>Contains no data or behavior.</li>
</ul>
</li>
<li><b>Component</b><ul>
<li>A structure that holds data for a specific aspect of an entity (e.g., position, velocity, health).</li>
<li>Entities can have multiple components.</li>
</ul>
</li>
<li><b>System</b><ul>
<li>Encapsulates behavior and operates on entities with specific components.</li>
</ul>
</li>
</ol>
<hr  />
<h2><a class="anchor" id="autotoc_md54"></a>
Architecture Overview</h2>
<div class="fragment"><div class="line">+--------------+         +-------------------+         +--------------+</div>
<div class="line">| EntityManager|--------&gt;|  ComponentManager |--------&gt;| SystemManager|</div>
<div class="line">+--------------+         +-------------------+         +--------------+</div>
<div class="line">| Entities     |         | Sparse Sets       |         | Systems      |</div>
<div class="line">+--------------+         +-------------------+         +--------------+</div>
</div><!-- fragment --><ol type="1">
<li><b><a class="el" href="classEntityManager.html" title="Manages the creation, destruction, and state of entities in an Entity-Component-System (ECS).">EntityManager</a></b>: Handles the creation and destruction of entities.</li>
<li><b><a class="el" href="classComponentManager.html" title="Manages components associated with entities in an Entity-Component-System (ECS).">ComponentManager</a></b>: Manages components using a <b>Sparse Set</b> structure for efficient access.</li>
<li><b><a class="el" href="classSystemManager.html" title="Manages and executes systems in an Entity-Component-System (ECS) architecture.">SystemManager</a></b>: Executes logic for entities with specific components.</li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md56"></a>
Class Breakdown</h1>
<h2><a class="anchor" id="autotoc_md57"></a>
EntityManager</h2>
<p><b>Responsibilities</b>:</p><ul>
<li>Create unique entity identifiers.</li>
<li>Recycle unused identifiers to optimize memory usage.</li>
</ul>
<p><b>Core Methods</b>:</p><ul>
<li><code>createEntity()</code>: Returns a new unique entity ID.</li>
<li><code>destroyEntity(id)</code>: Destroys the entity and frees its ID.</li>
</ul>
<h2><a class="anchor" id="autotoc_md58"></a>
SparseSet</h2>
<p><b>Responsibilities</b>:</p><ul>
<li>Efficiently map entities to their components.</li>
<li>Support constant-time addition, removal, and retrieval of components.</li>
</ul>
<p><b>Structure</b>:</p><ul>
<li><b>Sparse Array</b>: Maps entity IDs to indices in the dense array.</li>
<li><b>Dense Array</b>: Stores entity IDs compactly.</li>
<li><b>Component Array</b>: Stores the actual component data.</li>
</ul>
<p><b>Core Methods</b>:</p><ul>
<li><code>addComponent(entity, component)</code>: Adds a component to an entity.</li>
<li><code>removeComponent(entity)</code>: Removes a component from an entity.</li>
<li><code>getComponent(entity)</code>: Retrieves the component of an entity.</li>
</ul>
<h3><a class="anchor" id="autotoc_md59"></a>
Sparse Set Visualization</h3>
<h2><a class="anchor" id="autotoc_md60"></a>
ComponentManager</h2>
<p><b>Responsibilities</b>:</p><ul>
<li>Manage multiple Sparse Sets, one for each component type.</li>
<li>Abstract the management of component collections.</li>
</ul>
<p><b>Core Methods</b>:</p><ul>
<li><code>addComponent(entity, componentType, component)</code>: Adds a new component.</li>
<li><code>removeComponent(entity, componentType)</code>: Removes a component.</li>
<li><code>getComponent(entity, componentType)</code>: Retrieves a component.</li>
</ul>
<h2><a class="anchor" id="autotoc_md61"></a>
SystemManager</h2>
<p><b>Responsibilities</b>:</p><ul>
<li>Register and manage systems.</li>
<li>Execute systems in sequence.</li>
</ul>
<p><b>Core Methods</b>:</p><ul>
<li><code>addSystem(function)</code>: Registers a new system.</li>
<li><code>updateSystems()</code>: Executes all registered systems.</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md63"></a>
ECS Workflow</h1>
<h2><a class="anchor" id="autotoc_md64"></a>
1. Create Entities</h2>
<p>The <code><a class="el" href="classEntityManager.html" title="Manages the creation, destruction, and state of entities in an Entity-Component-System (ECS).">EntityManager</a></code> generates unique IDs for each entity.</p>
<div class="fragment"><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> entity = entityManager.createEntity();</div>
</div><!-- fragment --><ol type="1">
<li><b><a class="el" href="classEntityManager.html" title="Manages the creation, destruction, and state of entities in an Entity-Component-System (ECS).">EntityManager</a></b>: Handles the creation and destruction of entities. <br  />
</li>
<li><b><a class="el" href="classComponentManager.html" title="Manages components associated with entities in an Entity-Component-System (ECS).">ComponentManager</a></b>: Manages components using a <b>Sparse Set</b> structure for efficient access. <br  />
</li>
<li><b><a class="el" href="classSystemManager.html" title="Manages and executes systems in an Entity-Component-System (ECS) architecture.">SystemManager</a></b>: Executes logic for entities with specific components.</li>
</ol>
<hr  />
<h1><a class="anchor" id="autotoc_md66"></a>
Class Breakdown</h1>
<h2><a class="anchor" id="autotoc_md67"></a>
EntityManager</h2>
<p><b>Responsibilities</b>:</p><ul>
<li>Create unique entity identifiers.</li>
<li>Recycle unused identifiers to optimize memory usage.</li>
</ul>
<p><b>Core Methods</b>:</p><ul>
<li><code>createEntity()</code>: Returns a new unique entity ID.</li>
<li><code>destroyEntity(id)</code>: Destroys the entity and frees its ID.</li>
</ul>
<h2><a class="anchor" id="autotoc_md68"></a>
SparseSet</h2>
<p><b>Responsibilities</b>:</p><ul>
<li>Efficiently map entities to their components.</li>
<li>Support constant-time addition, removal, and retrieval of components.</li>
</ul>
<p><b>Structure</b>:</p><ul>
<li><b>Sparse Array</b>: Maps entity IDs to indices in the dense array.</li>
<li><b>Dense Array</b>: Stores entity IDs compactly.</li>
<li><b>Component Array</b>: Stores the actual component data.</li>
</ul>
<p><b>Core Methods</b>:</p><ul>
<li><code>addComponent(entity, component)</code>: Adds a component to an entity.</li>
<li><code>removeComponent(entity)</code>: Removes a component from an entity.</li>
<li><code>getComponent(entity)</code>: Retrieves the component of an entity.</li>
</ul>
<h3><a class="anchor" id="autotoc_md69"></a>
Sparse Set Visualization</h3>
<div class="fragment"><div class="line">Sparse Array: [---,  0,  1, ---,  2, ---,  3]</div>
<div class="line">Dense Array:  [20, 30, 40, 10]</div>
<div class="line">Components:   [CompA, CompB, CompC, CompD]</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md70"></a>
ComponentManager</h2>
<p><b>Responsibilities</b>:</p><ul>
<li>Manage multiple Sparse Sets, one for each component type.</li>
<li>Abstract the management of component collections.</li>
</ul>
<p><b>Core Methods</b>:</p><ul>
<li><code>addComponent(entity, componentType, component)</code>: Adds a new component.</li>
<li><code>removeComponent(entity, componentType)</code>: Removes a component.</li>
<li><code>getComponent(entity, componentType)</code>: Retrieves a component.</li>
</ul>
<h2><a class="anchor" id="autotoc_md71"></a>
SystemManager</h2>
<p><b>Responsibilities</b>:</p><ul>
<li>Register and manage systems.</li>
<li>Execute systems in sequence.</li>
</ul>
<p><b>Core Methods</b>:</p><ul>
<li><code>addSystem(function)</code>: Registers a new system.</li>
<li><code>updateSystems()</code>: Executes all registered systems.</li>
</ul>
<hr  />
<h1><a class="anchor" id="autotoc_md73"></a>
ECS Workflow</h1>
<h2><a class="anchor" id="autotoc_md74"></a>
1. Create Entities</h2>
<p>The <code><a class="el" href="classEntityManager.html" title="Manages the creation, destruction, and state of entities in an Entity-Component-System (ECS).">EntityManager</a></code> generates unique IDs for each entity.</p>
<div class="fragment"><div class="line"><span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> entity = entityManager.createEntity();</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md75"></a>
2. Add Components</h2>
<p>The <code><a class="el" href="classComponentManager.html" title="Manages components associated with entities in an Entity-Component-System (ECS).">ComponentManager</a></code> associates components with entities.</p>
<div class="fragment"><div class="line">componentManager.addComponent(entity, <a class="code hl_struct" href="structPosition.html">Position</a>{10.0f, 20.0f});</div>
<div class="line">componentManager.addComponent(entity, <a class="code hl_struct" href="structVelocity.html">Velocity</a>{1.0f, 1.5f});</div>
<div class="ttc" id="astructPosition_html"><div class="ttname"><a href="structPosition.html">Position</a></div><div class="ttdef"><b>Definition</b> Structures.hpp:19</div></div>
<div class="ttc" id="astructVelocity_html"><div class="ttname"><a href="structVelocity.html">Velocity</a></div><div class="ttdef"><b>Definition</b> Structures.hpp:32</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md76"></a>
3. Regiser System</h2>
<p>The <code><a class="el" href="classSystemManager.html" title="Manages and executes systems in an Entity-Component-System (ECS) architecture.">SystemManager</a></code> allows you to define behavior by registering systems.</p>
<div class="fragment"><div class="line">systemManager.addSystem([&amp;]() {</div>
<div class="line">    <span class="keyword">auto</span> position = componentManager.getComponent&lt;<a class="code hl_struct" href="structPosition.html">Position</a>&gt;(entity);</div>
<div class="line">    <span class="keyword">auto</span> velocity = componentManager.getComponent&lt;<a class="code hl_struct" href="structVelocity.html">Velocity</a>&gt;(entity);</div>
<div class="line">    position-&gt;<a class="code hl_variable" href="structVelocity.html#a187e49dd195f35d9566d87e75c2bd43d">x</a> += velocity-&gt;vx;</div>
<div class="line">    position-&gt;<a class="code hl_variable" href="structPosition.html#a54a6182b5f7539295b32255808897d3f">y</a> += velocity-&gt;vy;</div>
<div class="line">});</div>
<div class="ttc" id="astructPosition_html_a54a6182b5f7539295b32255808897d3f"><div class="ttname"><a href="structPosition.html#a54a6182b5f7539295b32255808897d3f">Position::y</a></div><div class="ttdeci">float y</div><div class="ttdef"><b>Definition</b> Structures.hpp:21</div></div>
<div class="ttc" id="astructVelocity_html_a187e49dd195f35d9566d87e75c2bd43d"><div class="ttname"><a href="structVelocity.html#a187e49dd195f35d9566d87e75c2bd43d">Velocity::x</a></div><div class="ttdeci">float x</div><div class="ttdef"><b>Definition</b> Structures.hpp:33</div></div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md77"></a>
4. Execute Systems</h2>
<p>All registered systems are executed in sequence.</p>
<div class="fragment"><div class="line">systemManager.updateSystems();</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md78"></a>
Code Example</h2>
<div class="fragment"><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="EntityManager_8hpp.html">EntityManager.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="ComponentManager_8hpp.html">ComponentManager.hpp</a>&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;<a class="code" href="SystemManager_8hpp.html">SystemManager.hpp</a>&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structPosition.html">Position</a> {</div>
<div class="line">    <span class="keywordtype">float</span> <a class="code hl_variable" href="structPosition.html#af684446cbf0f6d53386686283da6dcc6">x</a>, <a class="code hl_variable" href="structPosition.html#a54a6182b5f7539295b32255808897d3f">y</a>;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keyword">struct </span><a class="code hl_struct" href="structVelocity.html">Velocity</a> {</div>
<div class="line">    <span class="keywordtype">float</span> vx, vy;</div>
<div class="line">};</div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a class="code hl_function" href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a>() {</div>
<div class="line">    <a class="code hl_class" href="classEntityManager.html">EntityManager</a> entityManager;</div>
<div class="line">    <a class="code hl_class" href="classComponentManager.html">ComponentManager</a> componentManager;</div>
<div class="line">    <a class="code hl_class" href="classSystemManager.html">SystemManager</a> systemManager;</div>
<div class="line"> </div>
<div class="line">    <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> entity = entityManager.createEntity();</div>
<div class="line">    componentManager.addComponent(entity, <a class="code hl_struct" href="structPosition.html">Position</a>{0.0f, 0.0f});</div>
<div class="line">    componentManager.addComponent(entity, <a class="code hl_struct" href="structVelocity.html">Velocity</a>{1.0f, 2.0f});</div>
<div class="line"> </div>
<div class="line">    systemManager.addSystem([&amp;]() {</div>
<div class="line">        <span class="keyword">auto</span> position = componentManager.getComponent&lt;<a class="code hl_struct" href="structPosition.html">Position</a>&gt;(entity);</div>
<div class="line">        <span class="keyword">auto</span> velocity = componentManager.getComponent&lt;<a class="code hl_struct" href="structVelocity.html">Velocity</a>&gt;(entity);</div>
<div class="line">        position-&gt;<a class="code hl_variable" href="structVelocity.html#a187e49dd195f35d9566d87e75c2bd43d">x</a> += velocity-&gt;vx;</div>
<div class="line">        position-&gt;<a class="code hl_variable" href="structPosition.html#a54a6182b5f7539295b32255808897d3f">y</a> += velocity-&gt;vy;</div>
<div class="line">        std::cout &lt;&lt; <span class="stringliteral">&quot;New Position: (&quot;</span> &lt;&lt; position-&gt;<a class="code hl_variable" href="structPosition.html#af684446cbf0f6d53386686283da6dcc6">x</a> &lt;&lt; <span class="stringliteral">&quot;, &quot;</span> &lt;&lt; position-&gt;y &lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span>;</div>
<div class="line">    });</div>
<div class="line"> </div>
<div class="line">    systemManager.updateSystems();</div>
<div class="line">    <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="ttc" id="aComponentManager_8hpp_html"><div class="ttname"><a href="ComponentManager_8hpp.html">ComponentManager.hpp</a></div></div>
<div class="ttc" id="aEntityManager_8hpp_html"><div class="ttname"><a href="EntityManager_8hpp.html">EntityManager.hpp</a></div></div>
<div class="ttc" id="aSystemManager_8hpp_html"><div class="ttname"><a href="SystemManager_8hpp.html">SystemManager.hpp</a></div></div>
<div class="ttc" id="aclassComponentManager_html"><div class="ttname"><a href="classComponentManager.html">ComponentManager</a></div><div class="ttdoc">Manages components associated with entities in an Entity-Component-System (ECS).</div></div>
<div class="ttc" id="aclassEntityManager_html"><div class="ttname"><a href="classEntityManager.html">EntityManager</a></div><div class="ttdoc">Manages the creation, destruction, and state of entities in an Entity-Component-System (ECS).</div></div>
<div class="ttc" id="aclassSystemManager_html"><div class="ttname"><a href="classSystemManager.html">SystemManager</a></div><div class="ttdoc">Manages and executes systems in an Entity-Component-System (ECS) architecture.</div></div>
<div class="ttc" id="amain_8cpp_html_ae66f6b31b5ad750f1fe042a706a4e3d4"><div class="ttname"><a href="main_8cpp.html#ae66f6b31b5ad750f1fe042a706a4e3d4">main</a></div><div class="ttdeci">int main()</div><div class="ttdef"><b>Definition</b> main.cpp:13</div></div>
<div class="ttc" id="astructPosition_html_af684446cbf0f6d53386686283da6dcc6"><div class="ttname"><a href="structPosition.html#af684446cbf0f6d53386686283da6dcc6">Position::x</a></div><div class="ttdeci">float x</div><div class="ttdef"><b>Definition</b> Structures.hpp:20</div></div>
</div><!-- fragment --><hr  />
<h2><a class="anchor" id="autotoc_md80"></a>
Advantages of This ECS Design</h2>
<ul>
<li><b>High Performance</b>: The use of Sparse Sets ensures constant-time operations for adding, removing, and retrieving components, making the architecture highly efficient.</li>
<li><b>Modular Flexibility</b>: Systems are completely decoupled from entities and components, enabling seamless addition of new functionality without affecting existing code.</li>
<li><b>Scalability</b>: This architecture handles large numbers of entities and components efficiently, making it suitable for complex applications.</li>
</ul>
<hr  />
<h2><a class="anchor" id="autotoc_md82"></a>
Potential Extensions</h2>
<ul>
<li><b>Support for Tags or Groups</b>: Add mechanisms to group entities or tag them for more efficient queries.</li>
<li><b>Memory Pool Optimization</b>: Preallocate memory for components to reduce allocation overhead and improve performance.</li>
<li><b>Event-Driven Systems</b>: Introduce an event-based communication mechanism between systems for more complex interactions. </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.13.1 </li>
  </ul>
</div>
</body>
</html>
